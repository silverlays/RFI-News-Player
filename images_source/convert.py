import sys, os, io, json, fnmatch, base64

source_path = "."
output_path = os.path.join("..", sys.argv[1])
data_json = {}

print("Starting conversion...")
# ENCODE
for file in fnmatch.filter(os.listdir(source_path), "*.png"):
  with open(os.path.join(source_path, file), "rb") as file_data:
    print("Processing file", os.path.join(source_path, file))
    name = file[:-4]
    data_json[name] = str(base64.encodebytes(file_data.read(-1)), encoding="utf8").replace("\n", "")
with open(os.path.join(output_path, "images.py"), "w") as output_file:
  print("Writing output ->", os.path.join(output_path, "images.py"))
  output_file.write(
'''# Auto-Generated by custom converter
import base64


class Images():
  base64_app = b"iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAMAAABg3Am1AAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAACl1BMVEXhIBngIBviIBnbHx/gIBnhIBzhIB/hISThISXhIB7hISngICLfHwDgIAHgIAfgIADgIALgIBfgIB/lQUzoYmvqcHjqbnbkOUXkKDjkLz3kLTvkKjjhIBvhISHgIAPhIADuk5n51tj98vP/+/z////ump7iIA/4zdH98fL76+z86+376+398PH51djjISngIBHgIA3jISL3y87+/v7+//7unKHiIA364OP76OrjISzgIA/1v8P+/f3vm6H63N/75OfpbHT//P3+9/j0vcDsi5HrfYXlTVbgIB763d///f785efhISvzubz++frrf4b52dv+/Pz2xcjhLTThISbkMj/87e7tlpzmTFb+9vf//f3rd3/hIBH3zND97/H76ev76uz87vD509bhISLnV2H++vrpbHXjJDTkKjnjJjXhISjhIivnW2T++vvqb3fiJjDgIBbnWmPoWWPdHwDiIS3tj5XiISTiIADshYz2y83woabeHwDnX2jzsbftlJnump/vnKHnXWThIBfshIvum6Dtl5zumJzsiY7kN0T/9/n+7/HkLT3nW2b74eP0vsLnYWn//v7vnaP73+P85+rkNkP+9PX87u/iIBPnVl/+9vjxp6zoV2LkKDf+///53d/+9fXkIR/74+XlLUD++Pn++PjumJ3///7xo6nkIjDhJjDuh47lQ07nV2DnU13nVV/kMD7gIBP+8/X85+nsio/hJC/oZG3kPEj97/D52tzqbXXkO0bwoqbpa3TkOkbpaXLkOEX+8/TlQEzkNkTkKDn87e/jIjTgIAbaHx/eICHiISH87O7pa3PnXGbkMT/84+X629/jIjHgIAnnU1775+n87O386uzoY23kLDrkKznkLDvkLjvkLj3cICHfICH8N4UMAAAAAWJLR0QktAb5mQAAAAd0SU1FB+UIEg8KLfRRB4YAAAL2SURBVEjHvZXnX9NAGMdTuaRNfWgsDoZJi3AgIoqK4qoiOCrWjSiooFYUURQcOFDRKu4t4BYR996Ie+Hee/4xXi6h8IEWyAv9vbrL57733DPyPAyjRbpmPprONwAgpAVADMvpDQaeQDznFk++ewYQa2wORL4sQiahhSrBhLxYMHN+ILRs1bqNv4llAgKDVAW2FT1bQJLFGtwuJDQUh4ExvH1Eh0iqjlGdOkfzHgDEdenaDWMc0x33AGNsT+xWr959PABINEBfbLPJJ/oRC/2xLYbKhuM8AoweBsRjG04YOGjwEMEeOxTblPsT8TCPgOiA4eTMiJFymCTUOMDaraPwaDwGxhqTOBY1/iROGJdMLh0PDrLhUeNOSzAhBePUiWCQzaFJk9PSp1ClT51WP6yIEZ0wPQPj+BmgVz7MzAxQlTmrVuKQaMwSEWKzZifBnGwCzIV5RoeERGT3c8uO3AAScwDMjEEHYIVcGZi/QI4Sj3RQS0isBtjohcGL8vSweMnSZfnLCZC4YmVB2KrVAudas7ZwHVVhwXopR1QBDjZs3LQZtmzFeFv+9my8QwnLTnDE7qqJ0u6aKHFCUXHJnr37EvYfOCj7QIFDci2FH/aYBwKUlhwpiztKPFGAjPLyY/HHCUAyfYLKVjvTHBSllJ2MPAWnnQYapdQzZ8+dv3Dxks5LaXDgfzniylW4xjBOJazX80lUTBzyCtyowDetSSQzKlAJRsnJst6BW2n4Ni0fFbgDepKmBoC7IfgerYYagNaSV+D+g5SHpPybDjwqrnjsy2mwUFT6pOoprxXQbOHfP+nfAM80Aq7n2gDR/EIj4JL+k9Pkn35ZDeRm4JjQVyrgpbeSrlEeVWVRMv06kdxXSQGvvZUT3rx99/4DT3vrx0/Jn798Badiod7Iok8SEf/tO0saG1mapR8/g37lmUWlt9Ydiq7fSqtEFgtiEF2ayYj1zRHphqkzdpGaB7LgeQapS3mIi+qm7mCvBposneuPRkBxWgvg8xdv2kkNK0oYRwAAACV0RVh0ZGF0ZTpjcmVhdGUAMjAyMS0wOC0xOFQxNToxMDo0NCswMDowMNcL7PcAAAAldEVYdGRhdGU6bW9kaWZ5ADIwMjEtMDgtMThUMTU6MTA6NDQrMDA6MDCmVlRLAAAAAElFTkSuQmCC"
''')
  for key in data_json.keys():
    value = data_json[key]
    output_file.write(f'  base64_{key} = b"{value}"\n')

# DECODE
# with open(os.path.join(source_path, "output.json"), "r") as input_file:
#   data_json = json.load(input_file)
# with open(os.path.join(source_path, "play_test.png"), "wb") as output_file:
#   output_file.write(base64.decodebytes(bytes(data_json['Play'], encoding="utf8")))